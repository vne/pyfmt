/*! pyfmt 0.0.8 // 03.10.2014 // Vladimir Neverov <sanguini@gmail.com> // https://github.com/vne/pyfmt/wiki */
!function(){function a(a,b){this.string=a,this.options=b,this.spc=b&&"undefined"!=typeof b.space?b.space:" ",b&&b.nbsp&&(this.spc="&nbsp;")}var b,c=/[bdiouxXeEfFgGcrs%]/,d=/[diouxXeEfFgG]/,e=/[diu]/,f=/[1-9\.]/,g=/[0-9\.]/,h=/[hlL]/,i=/[#0\- \+]/,j={"#":"alt",0:"zero","-":"left"," ":"space","+":"sign"},k={C:0,P:1,N:2,F:3};try{b=window.JSON}catch(l){try{b=require("JSON")}catch(l){}}a.upgrade=function(){return String.prototype.pyfmt=function(){var b=this.toString();if(!arguments.length)return this;var c=new a(b);return c.format.apply(c,arguments)},this},a.prototype.format=function(a){return this.parse("undefined"==typeof a||a.constructor!==Object&&a.constructor!==Array?[].slice.call(arguments,0):a)},a.prototype.parse=function(a){var b,d,e=this.string.length,l=k.C,m=0,n="",o={},p=0;if(!a||!a.constructor)return"";for(this.is_obj=a.constructor===Object?!0:!1,this.data=a,b=0;e>b;b++)if(d=this.string.charAt(b),l===k.C)m||"%"!==d?n+=d:"%"===d&&(l=k.P);else if(l===k.P)if("%"===d)n+=d,l=k.C;else if("("===d)l=k.N;else if(c.test(d))o.argcnt=p++,o.format=d,n+=this.arg(o),o={},l=k.C;else if(h.test(d))o.lenmod?o.lenmod+=d:o.lenmod=d;else if(!o.mod&&f.test(d))o.mod=d;else if(o.mod&&g.test(d))o.mod+=d;else{if(!i.test(d))throw new Error("bad format specifier: "+d);if(o.mod)throw new Error("width modifier should go after flags");o[j[d]]=!0}else if(l===k.N)")"!==d?o.name?o.name+=d:o.name=d:l=k.F;else if(l===k.F)if(c.test(d))o.format=d,n+=this.arg(o),o={},l=k.C;else if(h.test(d))o.lenmod?o.lenmod+=d:o.lenmod=d;else if(!o.mod&&f.test(d))o.mod=d;else if(o.mod&&g.test(d))o.mod+=d;else{if(!i.test(d))throw new Error("bad format specifier: "+d);if(o.mod)throw new Error("width modifier should go after flags");o[j[d]]=!0}return n+=this.arg(o)},a.prototype.resolve=function(a){if(a.indexOf(".")<=0)return"";var b,c,d,e=a.split("."),f=this.data,g=-1;for(b in e){if(g=-1,c=e[b],(d=/(.+)\[(\d+)\]/.exec(c))&&(g=d[2],c=d[1]),"undefined"==typeof f[c])return"";if(f=f[c],g>=0&&f&&f.constructor===Array){if(!(f.length>g))return"";f=f[g]}}return f},a.prototype.arg=function(a){var c,f,g,h,i,j="",k=!1,l=10;if(!a)return"";if(0===Object.keys(a).length)return j;if(this.is_obj&&!a.name)throw new Error("object is passed as argument to a array-based formatting string");if(a.mod&&(g=a.mod.split("."),c=parseInt(g[0],10),2===g.length&&(f=parseInt(g[1],10))),this.is_obj)if("undefined"!=typeof this.data[a.name])j=this.data[a.name];else{if(!(a.name.indexOf(".")>=0))throw new Error("key "+a.name+" does not exist in the object");j=this.resolve(a.name)}else j=this.data[a.argcnt];if(d.test(a.format))k=!0,e.test(a.format)?(j=parseInt(j,10),f&&f>0&&(j=j.toFixed(f))):["e","E","g","G"].indexOf(a.format)>=0?(j=parseFloat(j,10).toExponential(),!f&&a.alt&&(j=j.toString(),g=j.indexOf("e"),j=j.substr(0,g)+"."+j.substr(g))):["f","F"].indexOf(a.format)>=0?(j=parseFloat(j,10),f&&f>0?j=j.toFixed(f):!f&&a.alt&&(j=j.toString()+".")):"o"===a.format?(l=8,j=Number(j).toString(8),a.alt&&0!==j&&(j="0"+j.toString())):["x","X"].indexOf(a.format)>=0&&(l=16,j=Number(j),isNaN(j)?j=0:(j=j.toString(16),a.alt&&0!==j&&(j="0x"+j))),["x","e","f","g"].indexOf(a.format)>=0?j=j.toString().toLowerCase():["X","E","F","G"].indexOf(a.format)>=0&&(j=j.toString().toUpperCase()),["x","X"].indexOf(a.format)<0&&isNaN(j)&&(j=0);else if("b"===a.format)j=j?"true":"false";else if("c"===a.format)j=j&&j.constructor&&j.constructor===String?j.charAt(0):isNaN(Number(j))?"":String.fromCharCode(j);else if("r"===a.format){if(!b)throw new Error("No JSON library is available, couldn't use the %r format specifier. Please, install JSON.js or use a modern browser");j=b.stringify(j),f&&(j=j.substr(0,f))}else"s"===a.format&&("undefined"!=typeof j?(j=j.toString(),f&&(j=j.substr(0,f))):j="");if(j=k?a.sign&&parseInt(j,l)>=0?"+"+j.toString():a.space&&parseInt(j,l)>=0?" "+j.toString():j.toString():j.toString(),c&&c>0&&j.length<c)if(i=a.zero?"0":this.spc,g=c-j.length,a.left)for(h=0;g>h;h++)j+=i;else for(h=0;g>h;h++)j=i+j;return j.toString()};try{module.exports=a}catch(l){window.pyfmt=a}}();